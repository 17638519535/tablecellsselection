<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>cells-selectorRectangular highlighting cells / jQuery plugin / cells-selector</title>

    <meta name="keywords"
          content="tablecellsselection, jquery plugin, cells-selector, cells selector, cells selection, javascript, highlight cells, highlighting cells, rectangular highlighting, table cells, html">
    <meta name="description"
          content="tablecellsselection - jQuery plugin emulate rectangular table's cells selection (like in GoogleDocs or Excel). Can be useful in WYSIWYG editors.">
    <meta name="author" content="Valerij Ivashchenko">
    <meta name="robots" content="follow, index">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">




    <script src="jquery-2.1.4.min.js"></script>

    <script src="tablecellsselection.js"></script>
    <link rel="stylesheet" href="tablecellsselection.css">
    <style type="text/css">
        .red{
            background-color: transparent;
        }
        .reds{
            background-color: red;
        }
        .table {
            width: 500px;
            max-width: 100%;
            /* margin-bottom: 20px; */
        }
        #tables {
            width: 800px;
            height: 800px;
            border: 1px solid #FF0000;
        }
    </style>
</head>

<body class="col-md-12">
    <!--<style>-->
        <!--td, th {text-align: center;}-->
        <!--.table-bordered>tbody>tr>td, .table-bordered>tbody>tr>td {vertical-align: middle;}-->
    <!--</style>-->
<div id="clickdiv">
<div id = "tables">
<div class="col-md-5" >
    <div class="col-md-12">
        <h2 class="bold">After <sup><small class="text-muted">with plugin</small></sup></h2>
    </div>


    <table style="margin-bottom: 0px" class="table table-bordered table1" summary="Table selection with plugin" id="tablecellsselection">
        <tr>
            <th>all</th>
            <th>Column 1</th>
            <th>Column 2</th>
            <th>Column 3</th>
            <th>Column 4</th>
            <th>Column 5</th>
            <th>Column 6</th>
        </tr>

        <tbody>
        <tr>
            <th>A</th>
            <td >$1</td>
            <td>$2</td>
            <td>$3</td>
            <td>$4</td>
            <td>$5</td>
            <td>$6</td>
        </tr>
        <tr>
            <th>B</th>
            <td>$7</td>
            <td >$8</td>
            <td>$9</td>
            <td>$10</td>
            <td>$11</td>
            <td>$12</td>

        </tr>
        <tr>
            <th>C</th>
            <td>$13</td>
            <td >$14</td>
            <td>$15</td>
            <td>$16</td>
            <td>$17</td>
            <td>$18</td>
        </tr>
        <tr>
            <th>D</th>
            <td>$19</td>
            <td>$20</td>
            <td>$21</td>
            <td>$22</td>
            <td>$23</td>
            <td>$24</td>
        </tr>
        <tr>
            <th>E</th>
            <td>$25</td>
            <td>$26</td>
            <td>$27</td>
            <td>$28</td>
            <td>$29</td>
            <td>$30</td>
        </tr>
        <tr>

        </tr>

        </tbody>
    </table>

    <h1>
        <input id="commit" type="button" value="确定"/>
        <input id="commit1" type="button" value="6孔"/>
        <input id="commit2" type="button" value="12孔"/>
        <input id="commit3" type="button" value="24孔"/>
    </h1>

    <h4 >你所选结果：<p id="data"> </p>
    </h4>
    <div style="width: 700px;height: 150px;border: 1px solid red;
    overflow: hidden; //解决子级浮动撑开问题
">
        <p><span>你</span> <span style=" position: relative;right: 20px;    left: 520px;" onclick="buttsion()">她</span><span ><input style="padding-left: 4px; margin-left: 500px;width: 150px;" type="text"/></span></p>

   <p>haha</p> </div>
</div>
</div>

</div>

<script>
    jQuery(document).ready(function ($) {
        $('#tablecellsselection').tableCellsSelection();
        $(document).bind("contextmenu",function(e){
            return false;
        });
    });

    var TimeFn = null;
    var TimeCtrl = null;
    var TimeCtrl1 = null;
    var data =[];
    //点击TH默认选中
    $(".table1 th").click(function () {
        // 获取准确的行
      var row=  $(this).parent().prevAll().length + 1;
       var call=  $(this).prevAll().length + 1;//列
             //那就是列选中
            $(".table1").find("td").each(function () {
              var  lie = $(this).prevAll().length + 1;
              if(lie === call){
                  $(this).addClass("tcs-selected");
              }
            })
        $(this).siblings("td").addClass("tcs-selected");
    })

    //动态渲染表格
    $("#commit1").click(function () {
      $(".table1").find("tr").remove();
        $(".table1").append("  <tr>\n" +
            "            <th>table</th>\n" +
            "            <th>Column 1</th>\n" +
            "            <th>Column 2</th>\n" +
            "            <th>Column 3</th>\n" +
            "            <th>Column 4</th>\n" +
            "            <th>Column 5</th>\n" +
            "            <th>Column 6</th>\n" +
            "            <th>Column 7</th>\n" +
            "            <th>Column 8</th>\n" +
            "            <th>Column 9</th>\n" +
            "        </tr>");
        var td = "   <tr>\n" +
            "            <th>F</th>\n" +
            "            <td>$31</td>\n" +
            "            <td>$32</td>\n" +
            "            <td>$33</td>\n" +
            "            <td>$34</td>\n" +
            "            <td>$35</td>\n" +
            "            <td>$36</td>\n" +
            "            <td>$34</td>\n" +
            "            <td>$35</td>\n" +
            "            <td>$36</td>\n" +
            "        </tr>"
     for(var i = 0;i<8;i++){
         $(".table1").append(td);
     }


    });
    //确认提交
    $("#commit").click(function () {
             data =[];
        $("#tablecellsselection").find("td").each(function () {
            if ($(this).css('background-color') === "rgba(51, 122, 183, 0.2)") {

                var nubmer = $(this).context.innerText;
                cellIndex = $(this).context.cellIndex;//选中数据所在第几列
                data.push(nubmer);
                console.log(cellIndex)   //列数
                // console.log(cellVal)     //行
                $("#data").text(data) ;
            }
        })

    });

   function buttsion(){
       conosle.log('你是');
   }

    //删除样式
    $("td").mouseup(function(e){
        var selectedCells =  $('#tablecellsselection').tableCellsSelection('selectedCells');
        // $.each(selectedCells, function (i, item) {
        //     $(item).attr("selected", "true");
        // });
        if(3 === e.which){
            console.log($(this).css('background-color'));
            if ($(this).css('background-color') === "rgba(51, 122, 183, 0.2)") {
                $(this).removeClass("tcs-selected");
            }
        }
    });

    // 按住ctrl+单击事件


    $('td').mousedown(function (e) {
        var _this = $(this);
        if (e.ctrlKey && e.which === 1) {
            clearTimeout(TimeFn);
            TimeCtrl1 = setTimeout(function () {
                console.log('渲染');
                $(_this).removeClass("tcs-selected");
                $(_this).removeClass("selection");
                clearTimeout(TimeCtrl);
                // $(_this).attr("selected", "true");
                $(_this).addClass("tcs-selected");
            }, 300);
        }
    })

     // 为单个 td 绑定点击事件   click 为开始点击事件  mouseenter 为点击松开事件
     // $("#tablecellsselection").on("mouseenter", "td",function (e) {
     //
     //     //判断当前背景是不是蓝色
     //     var parentNodeSiblings = $(this).parent().siblings();
     //     var siblings =  $(this).siblings();
     //     $.each(siblings, function (i, item) {
     //        if($(item).attr("selected") === "selected"){
     //            $(item).addClass("tcs-selected");
     //        }else{
     //            $(item).addClass("selection");
     //        }
     //     });
     //
     //     $.each(parentNodeSiblings, function (i, item) {
     //         var children = $(item).children();
     //
     //         $.each(children, function (i, item2) {
     //           if($(item2).attr("selected") === "selected"){
     //               $(item2).addClass("tcs-selected");
     //           }else{
     //               $(item2).addClass("selection");
     //           }
     //         });
     //     });
     //     if ($(this).css('background-color') === "rgba(51, 122, 183, 0.2)") {
     //         $(this).addClass("selection");

     //         $(this).addClass("red");
     //
     //         $(this).css('background-color: red')
     //     }
     //
     //  });


</script>
<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

</body>
</html>