<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>cells-selectorRectangular highlighting cells / jQuery plugin / cells-selector</title>

    <meta name="keywords"
          content="tablecellsselection, jquery plugin, cells-selector, cells selector, cells selection, javascript, highlight cells, highlighting cells, rectangular highlighting, table cells, html">
    <meta name="description"
          content="tablecellsselection - jQuery plugin emulate rectangular table's cells selection (like in GoogleDocs or Excel). Can be useful in WYSIWYG editors.">
    <meta name="author" content="Valerij Ivashchenko">
    <meta name="robots" content="follow, index">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">




    <script src="jquery-2.1.4.min.js"></script>

    <script src="tablecellsselection.js"></script>
    <link rel="stylesheet" href="tablecellsselection.css">
    <style type="text/css">
        .red{
            background-color: transparent;
        }
        .reds{
            background-color: red;
        }
        .table {
            width: 100%;
            max-width: 100%;
            /* margin-bottom: 20px; */
        }
    </style>
</head>
<body class="col-md-12">
    <!--<style>-->
        <!--td, th {text-align: center;}-->
        <!--.table-bordered>tbody>tr>td, .table-bordered>tbody>tr>td {vertical-align: middle;}-->
    <!--</style>-->
<div class="col-md-12">

</div>


<div class="col-md-5">
    <div class="col-md-12">
        <h2 class="bold">After <sup><small class="text-muted">with plugin</small></sup></h2>
    </div>
    <thead>
    <table style="margin: 0px" class="table table-bordered" summary="Table selection with plugin">

    <tr>
        <th>table</th>
        <th>Column 1</th>
        <th>Column 2</th>
        <th>Column 3</th>
        <th>Column 4</th>
        <th>Column 5</th>
        <th>Column 6</th>
    </tr>
    </table>
    <table style="margin-bottom: 0px" class="table table-bordered" summary="Table selection with plugin" id="tablecellsselection">

        </thead>
        <tbody>
        <tr>
            <th>A</th>
            <td >$1</td>
            <td>$2</td>
            <td>$3</td>
            <td>$4</td>
            <td>$5</td>
            <td>$6</td>
        </tr>
        <tr>
            <th>B</th>
            <td>$7</td>
            <td >$8</td>
            <td>$9</td>
            <td>$10</td>
            <td>$11</td>
            <td>$12</td>

        </tr>
        <tr>
            <th>C</th>
            <td>$13</td>
            <td >$14</td>
            <td>$15</td>
            <td>$16</td>
            <td>$17</td>
            <td>$18</td>
        </tr>
        <tr>
            <th>D</th>
            <td>$19</td>
            <td>$20</td>
            <td>$21</td>
            <td>$22</td>
            <td>$23</td>
            <td>$24</td>
        </tr>
        <tr>
            <th>E</th>
            <td>$25</td>
            <td>$26</td>
            <td>$27</td>
            <td>$28</td>
            <td>$29</td>
            <td>$30</td>
        </tr>
        <tr>
            <th>F</th>
            <td>$31</td>
            <td>$32</td>
            <td>$33</td>
            <td>$34</td>
            <td>$35</td>
            <td>$36</td>
        </tr>
        </tbody>
    </table>

</div>
    <h1><input id="commit" type="button" value="确定"/> </h1>


    <div >
        <h4 id="data">
            <p > 你所选结果是</p>
        </h4>
    <!--<a class="github-button" href="https://github.com/likemusic/tablecellsselection" data-style="mega" data-count-href="/likemusic/tablecellsselection/stargazers" data-count-api="/repos/likemusic/tablecellsselection#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star likemusic/tablecellsselection on GitHub">Star</a>-->
    </div>

<script>
    jQuery(document).ready(function ($) {
        $('#tablecellsselection').tableCellsSelection();
        $(document).bind("contextmenu",function(e){
            return false;
        });
    });

    var TimeFn = null;
    var TimeCtrl = null;
    var TimeCtrl1 = null;
    var data =[];

    //确认提交
    $("#commit").click(function () {
             data =[];
        $("#tablecellsselection").find("td").each(function () {
            if ($(this).css('background-color') === "rgba(51, 122, 183, 0.2)") {

                var nubmer = $(this).context.innerText;
                cellIndex = $(this).context.cellIndex;//选中数据所在第几列
                data.push(nubmer);
                console.log(cellIndex)   //列数
                // console.log(cellVal)     //行
                $("#data").text(data) ;
            }
        })

    });
    //删除样式
    $("td").mouseup(function(e){
        var selectedCells =  $('#tablecellsselection').tableCellsSelection('selectedCells');
        // $.each(selectedCells, function (i, item) {
        //     $(item).attr("selected", "true");
        // });
        if(3 === e.which){
            console.log($(this).css('background-color'));
            if ($(this).css('background-color') === "rgba(51, 122, 183, 0.2)") {
                $(this).removeClass("tcs-selected");
            }
        }
    });

    // 按住ctrl+单击事件


    $('td').mousedown(function (e) {
        var _this = $(this);
        if (e.ctrlKey && e.which === 1) {
            clearTimeout(TimeFn);
            TimeCtrl1 = setTimeout(function () {
                console.log('渲染');
                $(_this).removeClass("tcs-selected");
                $(_this).removeClass("selection");
                clearTimeout(TimeCtrl);
                // $(_this).attr("selected", "true");
                $(_this).addClass("tcs-selected");
            }, 300);
        }
    })

     // 为单个 td 绑定点击事件   click 为开始点击事件  mouseenter 为点击松开事件
     // $("#tablecellsselection").on("mouseenter", "td",function (e) {
     //
     //     //判断当前背景是不是蓝色
     //     var parentNodeSiblings = $(this).parent().siblings();
     //     var siblings =  $(this).siblings();
     //     $.each(siblings, function (i, item) {
     //        if($(item).attr("selected") === "selected"){
     //            $(item).addClass("tcs-selected");
     //        }else{
     //            $(item).addClass("selection");
     //        }
     //     });
     //
     //     $.each(parentNodeSiblings, function (i, item) {
     //         var children = $(item).children();
     //
     //         $.each(children, function (i, item2) {
     //           if($(item2).attr("selected") === "selected"){
     //               $(item2).addClass("tcs-selected");
     //           }else{
     //               $(item2).addClass("selection");
     //           }
     //         });
     //     });
     //     if ($(this).css('background-color') === "rgba(51, 122, 183, 0.2)") {
     //         $(this).addClass("selection");

     //         $(this).addClass("red");
     //
     //         $(this).css('background-color: red')
     //     }
     //
     //  });


</script>
<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

</body>
</html>